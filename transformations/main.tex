% generated by Ott 0.25 from: gram.ott high.ott op.ott
\documentclass[11pt]{article}
\usepackage{amsmath,amssymb}
\usepackage{supertabular}
\usepackage{geometry}
\usepackage{ifthen}
\usepackage{alltt}%hack
\geometry{a4paper,dvips,twoside,left=22.5mm,right=22.5mm,top=20mm,bottom=30mm}
\usepackage{color}
\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
\usepackage{stmaryrd}
\usepackage{graphicx}
\newcommand\cnt{\kappa}
\newcommand\fm{\Lambda}
\newcommand\g{\Gamma}
\newcommand\m{\mu}
\newcommand\sext{_{\texttt{s}\hskip0pt}\hskip0pt}

\newcommand\hv{v{_h} }
\newcommand\he{e{_h} }
\newcommand\hf{f\!{_h} }
\newcommand\hs{s{_h} }
\newcommand\hb{b{_h} }
\newcommand\hc{c{_h} }

\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ \ottmv{c} $ & \ottcom{numeric value} \\
 $ \ottmv{a} $ & \ottcom{array} \\
 $ \ottmv{x} $ & \ottcom{term variable} \\
 $ \ottmv{f} $ & \ottcom{function name} \\
 $ \cnt $ & \ottcom{program counter} \\
 $ \ottmv{n} $ & \ottcom{index variable} \\
 $ \ottmv{k} $ & \ottcom{index variable} \\
 $ \hb $ & \ottcom{boolean value} \\
 $ \hc $ & \ottcom{numeric value} \\
 $ \hf $ & \ottcom{function name} \\
 $ \ottmv{rval} $ & \ottcom{``return value'' variable} \\
 $ \ottmv{rnset} $ & \ottcom{``rval-not-set'' variable} \\
}}

\newcommand{\ottl}{
\ottrulehead{\ottnt{l}}{::=}{\ottcom{literals}}\ottprodnewline
\ottfirstprodline{|}{ \textsc{True} }{}{}{}{\ottcom{bitmask true (\texttt{0b1111...})}}\ottprodnewline
\ottprodline{|}{ \textsc{False} }{}{}{}{\ottcom{bitmask false (\texttt{0b0000...})}}}

\newcommand{\ottv}{
\ottrulehead{\ottnt{v}}{::=}{\ottcom{values}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{l}}{}{}{}{\ottcom{numeric literal}}\ottprodnewline
\ottprodline{|}{\ottmv{c}}{}{}{}{\ottcom{numeric value}}\ottprodnewline
\ottprodline{|}{\ottmv{a}}{}{}{}{\ottcom{bytearray}}}

\newcommand{\ottunop}{
\ottrulehead{\ominus\!}{::=}{\ottcom{unary operations}}\ottprodnewline
\ottfirstprodline{|}{ {\raise-.6ex\hbox{\scalebox{1.1}[1]{\texttt{\~}\hskip0pt}\hskip0pt}\hskip0pt}\!\! }{}{}{}{\ottcom{bitwise not}}}

\newcommand{\ottbinop}{
\ottrulehead{\oplus}{::=}{\ottcom{binary operations}}\ottprodnewline
\ottfirstprodline{|}{ \texttt{+} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{-} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{*} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{<<} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{>>} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \scalebox{1.25}[1]{\texttt{\&}\hskip0pt} }{}{}{}{\ottcom{bitwise and}}\ottprodnewline
\ottprodline{|}{ \texttt{|} }{}{}{}{\ottcom{bitwise or}}\ottprodnewline
\ottprodline{|}{ \texttt{==}\sext }{}{}{}{\ottcom{equals (sign extended)}}\ottprodnewline
\ottprodline{|}{ \texttt{!=}\sext }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{>}\sext }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{<}\sext }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{>=}\sext }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{<=}\sext }{}{}{}{}}

\newcommand{\ottfval}{
\ottrulehead{\ottnt{fval}}{::=}{\ottcom{function spec}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{n}}}  \ottsym{)}  \ottsym{:}  \ottnt{s}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e}}{}{}{}{}}

\newcommand{\ottfndef}{
\ottrulehead{\ottnt{fndef}}{::=}{\ottcom{function definition}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{fdef} \, \ottmv{f} \, \ottnt{fval}}{}{}{}{}}

\newcommand{\ottprogram}{
\ottrulehead{\ottnt{program}}{::=}{\ottcom{program}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{fndef_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{fndef_{\ottmv{n}}}  \ottsym{;} \, \ottkw{expose} \, \ottnt{fndef}}{}{}{}{\ottcom{list of fdefs}}}

\newcommand{\ottfm}{
\ottrulehead{\fm}{::=}{\ottcom{function store}}\ottprodnewline
\ottfirstprodline{|}{ \emptyset_{\Lambda} }{}{}{}{\ottcom{empty function store}}\ottprodnewline
\ottprodline{|}{\fm  \ottsym{[}  \ottmv{f}  \mapsto  \ottnt{fval}  \ottsym{]}}{}{}{}{\ottcom{define function}}}

\newcommand{\ottg}{
\ottrulehead{\g}{::=}{\ottcom{global memory}}\ottprodnewline
\ottfirstprodline{|}{ \emptyset_{\Gamma} }{}{}{}{}\ottprodnewline
\ottprodline{|}{\g  \ottsym{[}  \ottmv{a}  \mapsto  \!\texttt{[]}  \ottsym{]}}{}{}{}{\ottcom{new array}}\ottprodnewline
\ottprodline{|}{\g  \ottsym{(}  \ottmv{a}  \ottsym{)}  \ottsym{[}  \ottnt{v_{{\mathrm{1}}}}  \mapsto  \ottnt{v_{{\mathrm{2}}}}  \ottsym{]}}{}{}{}{\ottcom{array update}}}

\newcommand{\ottm}{
\ottrulehead{\m}{::=}{\ottcom{local memory}}\ottprodnewline
\ottfirstprodline{|}{ \emptyset_{\mu} }{}{}{}{\ottcom{empty memory}}\ottprodnewline
\ottprodline{|}{\m  \ottsym{[}  \ottmv{x}  \mapsto  \ottnt{v}  \ottsym{]}}{}{}{}{\ottcom{add/update variable}}\ottprodnewline
\ottprodline{|}{\m_{{\mathrm{1}}}  \ottsym{\mbox{$\mid$}}  \m_{{\mathrm{2}}}}{}{}{}{\ottcom{push stack frame}}}

\newcommand{\otte}{
\ottrulehead{\ottnt{e}}{::=}{\ottcom{expressions}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{l}}{}{}{}{\ottcom{numeric literal}}\ottprodnewline
\ottprodline{|}{\ottmv{c}}{}{}{}{\ottcom{numeric value}}\ottprodnewline
\ottprodline{|}{\ottmv{a}}{}{}{}{\ottcom{bytearray}}\ottprodnewline
\ottprodline{|}{\ottmv{x}}{}{}{}{\ottcom{variable}}\ottprodnewline
\ottprodline{|}{\ottmv{a}  \ottsym{[}  \ottnt{e}  \ottsym{]}}{}{}{}{\ottcom{array access}}\ottprodnewline
\ottprodline{|}{\ominus\! \, \ottnt{e}}{}{}{}{\ottcom{unary operation}}\ottprodnewline
\ottprodline{|}{\ottnt{e_{{\mathrm{1}}}} \, \oplus \, \ottnt{e_{{\mathrm{2}}}}}{}{}{}{\ottcom{binary operation}}\ottprodnewline
\ottprodline{|}{\ottmv{f}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)}}{}{}{}{\ottcom{function application}}\ottprodnewline
\ottprodline{|}{\ottnt{s}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e}}{}{}{}{\ottcom{function body}}}

\newcommand{\otts}{
\ottrulehead{\ottnt{s}}{::=}{\ottcom{statements}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{skip}}{}{}{}{\ottcom{skip}}\ottprodnewline
\ottprodline{|}{\ottnt{s_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{s_{{\mathrm{2}}}}}{}{}{}{\ottcom{sequence}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{/}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{k}}}  \ottsym{/}  \ottnt{v_{\ottmv{k}}}  \ottsym{\}}  \ottnt{s}}{}{}{}{\ottcom{variable substitution}}\ottprodnewline
\ottprodline{|}{\ottkw{def} \, \ottmv{x}  \ottsym{:=}  \ottnt{e}}{}{}{}{\ottcom{variable declaration}}\ottprodnewline
\ottprodline{|}{\ottkw{def} \, \ottmv{x}  \ottsym{:=}  \ottmv{a}}{}{}{}{\ottcom{array declaration}}\ottprodnewline
\ottprodline{|}{\ottmv{x}  \ottsym{:=}  \ottnt{e}}{}{}{}{\ottcom{variable assignment}}\ottprodnewline
\ottprodline{|}{\ottmv{a}  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{]}  \ottsym{:=}  \ottnt{e_{{\mathrm{2}}}}}{}{}{}{\ottcom{array assignment}}\ottprodnewline
\ottprodline{|}{\ottkw{for} \, \ottmv{x} \, \ottkw{from} \, \ottnt{v_{{\mathrm{1}}}} \, \ottkw{to} \, \ottnt{v_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{s}}{}{}{}{\ottcom{for loop}}}

\newcommand{\otthv}{
\ottrulehead{\hv}{::=}{\ottcom{values}}\ottprodnewline
\ottfirstprodline{|}{\hb}{}{}{}{\ottcom{boolean value}}\ottprodnewline
\ottprodline{|}{\hc}{}{}{}{\ottcom{numeric value}}}

\newcommand{\otthunop}{
\ottrulehead{\ominus_h\!}{::=}{\ottcom{unary operations}}\ottprodnewline
\ottfirstprodline{|}{ \texttt{!} }{}{}{}{\ottcom{logical not}}\ottprodnewline
\ottprodline{|}{ {\raise-.6ex\hbox{\scalebox{1.1}[1]{\texttt{\~}\hskip0pt}\hskip0pt}\hskip0pt}\!\! }{}{}{}{\ottcom{bitwise not}}}

\newcommand{\otthbinop}{
\ottrulehead{\oplus_h}{::=}{\ottcom{binary operations}}\ottprodnewline
\ottfirstprodline{|}{ \texttt{+} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{-} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{*} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{<<} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{>>} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \scalebox{1.25}[1]{\texttt{\&} } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{|} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \scalebox{1.25}[1]{\texttt{\&\&} } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{||} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{==} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{!=} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{>} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{<} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{>=} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \texttt{<=} }{}{}{}{}}

\newcommand{\otthe}{
\ottrulehead{\he}{::=}{\ottcom{expressions}}\ottprodnewline
\ottfirstprodline{|}{\hb}{}{}{}{\ottcom{boolean value}}\ottprodnewline
\ottprodline{|}{\hc}{}{}{}{\ottcom{numeric value}}\ottprodnewline
\ottprodline{|}{\ottmv{x}}{}{}{}{\ottcom{variable}}\ottprodnewline
\ottprodline{|}{\ottmv{a}  \ottsym{[}  \he  \ottsym{]}}{}{}{}{\ottcom{array access}}\ottprodnewline
\ottprodline{|}{\ominus_h\! \, \he}{}{}{}{\ottcom{unary operation}}\ottprodnewline
\ottprodline{|}{\he_{{\mathrm{1}}} \, \oplus \, \he_{{\mathrm{2}}}}{}{}{}{\ottcom{binary operation}}\ottprodnewline
\ottprodline{|}{\hf  \ottsym{(}  \he_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \he_{\ottmv{n}}  \ottsym{)}}{}{}{}{\ottcom{function application}}}

\newcommand{\otths}{
\ottrulehead{\hs}{::=}{\ottcom{statements}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{hskip}}{}{}{}{\ottcom{skip}}\ottprodnewline
\ottprodline{|}{\hs_{{\mathrm{1}}}  \ottsym{;}  \hs_{{\mathrm{2}}}}{}{}{}{\ottcom{sequence}}\ottprodnewline
\ottprodline{|}{\ottkw{hdef} \, \ottmv{x}  \ottsym{:=}  \he}{}{}{}{\ottcom{variable declaration}}\ottprodnewline
\ottprodline{|}{\ottkw{hdef} \, \ottmv{x}  \ottsym{:=}  \ottmv{a}}{}{}{}{\ottcom{array declaration}}\ottprodnewline
\ottprodline{|}{\ottmv{x}  \ottsym{:=}  \he}{}{}{}{\ottcom{variable assignment}}\ottprodnewline
\ottprodline{|}{\ottmv{a}  \ottsym{[}  \he_{{\mathrm{1}}}  \ottsym{]}  \ottsym{:=}  \he_{{\mathrm{2}}}}{}{}{}{\ottcom{array assignment}}\ottprodnewline
\ottprodline{|}{\ottkw{hfor} \, \ottmv{x} \, \ottkw{from} \, \hv_{{\mathrm{1}}} \, \ottkw{to} \, \hv_{{\mathrm{2}}}  \ottsym{:}  \hs}{}{}{}{\ottcom{for loop}}\ottprodnewline
\ottprodline{|}{\ottkw{hif} \, \he \, \ottkw{then} \, \hs_{{\mathrm{1}}} \, \ottkw{else} \, \hs_{{\mathrm{2}}}}{}{}{}{\ottcom{conditional branch}}\ottprodnewline
\ottprodline{|}{\ottkw{hreturn} \, \he}{}{}{}{\ottcom{return}}}

\newcommand{\otthfval}{
\ottrulehead{\ottnt{hfval}}{::=}{\ottcom{function spec}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{n}}}  \ottsym{)}  \ottsym{:}  \hs}{}{}{}{}}

\newcommand{\otthfndef}{
\ottrulehead{\ottnt{hfndef}}{::=}{\ottcom{function definition}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{fdef} \, \hf \, \ottnt{hfval}}{}{}{}{}}

\newcommand{\otthprogram}{
\ottrulehead{\ottnt{hprogram}}{::=}{\ottcom{program}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{hfndef_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{hfndef_{\ottmv{n}}}  \ottsym{;} \, \ottkw{expose} \, \ottnt{hfndef}}{}{}{}{\ottcom{list of fdefs}}}

\newcommand{\ottctx}{
\ottrulehead{\ottnt{ctx}}{::=}{\ottcom{branch context}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{l}}{}{}{}{\ottcom{numeric literal}}\ottprodnewline
\ottprodline{|}{\ottmv{x}}{}{}{}{\ottcom{variable}}\ottprodnewline
\ottprodline{|}{\ominus\! \, \ottnt{ctx}}{}{}{}{\ottcom{unary operation}}\ottprodnewline
\ottprodline{|}{\ottnt{ctx_{{\mathrm{1}}}} \, \oplus \, \ottnt{ctx_{{\mathrm{2}}}}}{}{}{}{\ottcom{binary operation}}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\ottl\ottinterrule
\ottv\ottinterrule
\ottunop\ottinterrule
\ottbinop\ottinterrule
\ottfval\ottinterrule
\ottfndef\ottinterrule
\ottprogram\ottinterrule
\ottfm\ottinterrule
\ottg\ottinterrule
\ottm\ottinterrule
\otte\ottinterrule
\otts\ottinterrule
\otthv\ottinterrule
\otthunop\ottinterrule
\otthbinop\ottinterrule
\otthe\ottinterrule
\otths\ottinterrule
\otthfval\ottinterrule
\otthfndef\ottinterrule
\otthprogram\ottinterrule
\ottctx\ottafterlastrule
}}

% defnss
% defns Jop
%% defn expr_reduce
\newcommand{\ottdruleExrXXvar}[1]{\ottdrule[#1]{%
\ottpremise{\m  \ottsym{=}  \m'  \ottsym{[}  \ottmv{x}  \mapsto  \ottnt{v}  \ottsym{]}}%
\ottpremise{ \cnt'  =  \cnt  + 1 }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottmv{x}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottnt{v} }{%
{\ottdrulename{Exr\_var}}{}%
}}


\newcommand{\ottdruleExrXXarrXXgetXXexpr}[1]{\ottdrule[#1]{%
\ottpremise{ \{ \fm , \g , \m , \cnt \}\,  \ottnt{e}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottnt{e'} }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottmv{a}  \ottsym{[}  \ottnt{e}  \ottsym{]}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottmv{a}  \ottsym{[}  \ottnt{e'}  \ottsym{]} }{%
{\ottdrulename{Exr\_arr\_get\_expr}}{}%
}}


\newcommand{\ottdruleExrXXarrXXgetXXval}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{v'}  \ottsym{=}  \g  \ottsym{(}  \ottmv{a}  \ottsym{)}  \ottsym{[}  \ottnt{v}  \ottsym{]}}%
\ottpremise{ \cnt'  =  \cnt  + 1 }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottmv{a}  \ottsym{[}  \ottnt{v}  \ottsym{]}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottnt{v'} }{%
{\ottdrulename{Exr\_arr\_get\_val}}{}%
}}


\newcommand{\ottdruleExrXXunopXXexpr}[1]{\ottdrule[#1]{%
\ottpremise{ \{ \fm , \g , \m , \cnt \}\,  \ottnt{e}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottnt{e'} }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ominus\! \, \ottnt{e}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ominus\! \, \ottnt{e'} }{%
{\ottdrulename{Exr\_unop\_expr}}{}%
}}


\newcommand{\ottdruleExrXXunopXXval}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{v'}  \equiv  \llbracket  \ominus\! \, \ottnt{v}  \rrbracket}%
\ottpremise{ \cnt'  =  \cnt  + 1 }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ominus\! \, \ottnt{v}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottnt{v'} }{%
{\ottdrulename{Exr\_unop\_val}}{}%
}}


\newcommand{\ottdruleExrXXbinopXXl}[1]{\ottdrule[#1]{%
\ottpremise{ \{ \fm , \g , \m , \cnt \}\,  \ottnt{e_{{\mathrm{1}}}}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottnt{e'_{{\mathrm{1}}}} }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottnt{e_{{\mathrm{1}}}} \, \oplus \, \ottnt{e_{{\mathrm{2}}}}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottnt{e'_{{\mathrm{1}}}} \, \oplus \, \ottnt{e_{{\mathrm{2}}}} }{%
{\ottdrulename{Exr\_binop\_l}}{}%
}}


\newcommand{\ottdruleExrXXbinopXXr}[1]{\ottdrule[#1]{%
\ottpremise{ \{ \fm , \g , \m , \cnt \}\,  \ottnt{e_{{\mathrm{2}}}}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottnt{e'_{{\mathrm{2}}}} }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottnt{v} \, \oplus \, \ottnt{e_{{\mathrm{2}}}}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottnt{v} \, \oplus \, \ottnt{e'_{{\mathrm{2}}}} }{%
{\ottdrulename{Exr\_binop\_r}}{}%
}}


\newcommand{\ottdruleExrXXbinopXXval}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{v_{{\mathrm{3}}}}  \equiv  \llbracket  \ottnt{v_{{\mathrm{1}}}} \, \oplus \, \ottnt{v_{{\mathrm{2}}}}  \rrbracket}%
\ottpremise{ \cnt'  =  \cnt  + 1 }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottnt{v_{{\mathrm{1}}}} \, \oplus \, \ottnt{v_{{\mathrm{2}}}}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottnt{v_{{\mathrm{3}}}} }{%
{\ottdrulename{Exr\_binop\_val}}{}%
}}


\newcommand{\ottdruleExrXXfnXXexpr}[1]{\ottdrule[#1]{%
\ottpremise{ \{ \fm , \g , \m , \cnt \}\,  \ottnt{e_{{\mathrm{1}}}}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottnt{e'_{{\mathrm{1}}}} }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottmv{f}  \ottsym{(}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{k}}}  \ottsym{,}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottmv{f}  \ottsym{(}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{k}}}  \ottsym{,}  \ottnt{e'_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{n}}}  \ottsym{)} }{%
{\ottdrulename{Exr\_fn\_expr}}{}%
}}


\newcommand{\ottdruleExrXXfnXXcall}[1]{\ottdrule[#1]{%
\ottpremise{\fm  \ottsym{=}  \fm'  \ottsym{[}  \ottmv{f}  \mapsto  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{k}}}  \ottsym{)}  \ottsym{:}  \ottnt{s}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e}  \ottsym{]}}%
\ottpremise{\m'  \ottsym{=}  \m  \ottsym{\mbox{$\mid$}}   \emptyset_{\mu} }%
\ottpremise{ \cnt'  =  \cnt  + 1 }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottmv{f}  \ottsym{(}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{k}}}  \ottsym{)}   \longrightarrow  \{ \fm , \g , \m' , \cnt' \}\,  \ottsym{\{}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{/}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{k}}}  \ottsym{/}  \ottnt{v_{\ottmv{k}}}  \ottsym{\}}  \ottnt{s}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e} }{%
{\ottdrulename{Exr\_fn\_call}}{}%
}}


\newcommand{\ottdruleExrXXskipXXexpr}[1]{\ottdrule[#1]{%
\ottpremise{ \{ \fm , \g , \m , \cnt \}\,  \ottnt{e}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottnt{e'} }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottkw{skip}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e}   \longrightarrow  \{ \fm , \g , \m , \cnt \}\,  \ottnt{e'} }{%
{\ottdrulename{Exr\_skip\_expr}}{}%
}}


\newcommand{\ottdruleExrXXskipXXval}[1]{\ottdrule[#1]{%
\ottpremise{\m  \ottsym{=}  \m_{{\mathrm{1}}}  \ottsym{\mbox{$\mid$}}  \m_{{\mathrm{2}}}}%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottkw{skip}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{v}   \longrightarrow  \{ \fm , \g , \m_{{\mathrm{1}}} , \cnt \}\,  \ottnt{v} }{%
{\ottdrulename{Exr\_skip\_val}}{}%
}}


\newcommand{\ottdruleExrXXseq}[1]{\ottdrule[#1]{%
\ottpremise{ \{ \fm , \g , \m , \cnt \}\,  \ottnt{s_{{\mathrm{1}}}}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}}   \longrightarrow  \{ \fm , \g , \m' , \cnt' \}\,  \ottnt{s'_{{\mathrm{1}}}}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}} }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottnt{s_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{s_{{\mathrm{2}}}}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}}   \longrightarrow  \{ \fm , \g , \m' , \cnt' \}\,  \ottnt{s'_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{s_{{\mathrm{2}}}}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}} }{%
{\ottdrulename{Exr\_seq}}{}%
}}


\newcommand{\ottdruleExrXXseqXXskip}[1]{\ottdrule[#1]{%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottkw{skip}  \ottsym{;}  \ottnt{s}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}}   \longrightarrow  \{ \fm , \g , \m , \cnt \}\,  \ottnt{s}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}} }{%
{\ottdrulename{Exr\_seq\_skip}}{}%
}}


\newcommand{\ottdruleExrXXdefXXexpr}[1]{\ottdrule[#1]{%
\ottpremise{ \{ \fm , \g , \m , \cnt \}\,  \ottnt{e}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottnt{e'} }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottkw{def} \, \ottmv{x}  \ottsym{:=}  \ottnt{e}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottkw{def} \, \ottmv{x}  \ottsym{:=}  \ottnt{e'}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}} }{%
{\ottdrulename{Exr\_def\_expr}}{}%
}}


\newcommand{\ottdruleExrXXdefXXval}[1]{\ottdrule[#1]{%
\ottpremise{\m'  \ottsym{=}  \m  \ottsym{[}  \ottmv{x}  \mapsto  \ottnt{v}  \ottsym{]}}%
\ottpremise{ \cnt'  =  \cnt  + 1 }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottkw{def} \, \ottmv{x}  \ottsym{:=}  \ottnt{v}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}}   \longrightarrow  \{ \fm , \g , \m' , \cnt' \}\,  \ottkw{skip}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}} }{%
{\ottdrulename{Exr\_def\_val}}{}%
}}


\newcommand{\ottdruleExrXXdefXXarr}[1]{\ottdrule[#1]{%
\ottpremise{\g'  \ottsym{=}  \g  \ottsym{[}  \ottmv{a}  \mapsto  \!\texttt{[]}  \ottsym{]}}%
\ottpremise{\m'  \ottsym{=}  \m  \ottsym{[}  \ottmv{x}  \mapsto  \ottmv{a}  \ottsym{]}}%
\ottpremise{ \cnt'  =  \cnt  + 1 }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottkw{def} \, \ottmv{x}  \ottsym{:=}  \ottmv{a}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}}   \longrightarrow  \{ \fm , \g' , \m' , \cnt' \}\,  \ottkw{skip}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}} }{%
{\ottdrulename{Exr\_def\_arr}}{}%
}}


\newcommand{\ottdruleExrXXassignXXexpr}[1]{\ottdrule[#1]{%
\ottpremise{ \{ \fm , \g , \m , \cnt \}\,  \ottnt{e}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottnt{e'} }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottmv{x}  \ottsym{:=}  \ottnt{e}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottmv{x}  \ottsym{:=}  \ottnt{e'}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}} }{%
{\ottdrulename{Exr\_assign\_expr}}{}%
}}


\newcommand{\ottdruleExrXXassignXXval}[1]{\ottdrule[#1]{%
\ottpremise{\m'  \ottsym{=}  \m  \ottsym{[}  \ottmv{x}  \mapsto  \ottnt{v}  \ottsym{]}}%
\ottpremise{ \cnt'  =  \cnt  + 1 }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottmv{x}  \ottsym{:=}  \ottnt{v}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}}   \longrightarrow  \{ \fm , \g , \m' , \cnt' \}\,  \ottkw{skip}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}} }{%
{\ottdrulename{Exr\_assign\_val}}{}%
}}


\newcommand{\ottdruleExrXXarrXXassignXXexprXXl}[1]{\ottdrule[#1]{%
\ottpremise{ \{ \fm , \g , \m , \cnt \}\,  \ottnt{e_{{\mathrm{1}}}}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottnt{e'_{{\mathrm{1}}}} }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottmv{a}  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{]}  \ottsym{:=}  \ottnt{e_{{\mathrm{2}}}}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottmv{a}  \ottsym{[}  \ottnt{e'_{{\mathrm{1}}}}  \ottsym{]}  \ottsym{:=}  \ottnt{e_{{\mathrm{2}}}}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}} }{%
{\ottdrulename{Exr\_arr\_assign\_expr\_l}}{}%
}}


\newcommand{\ottdruleExrXXarrXXassignXXexprXXr}[1]{\ottdrule[#1]{%
\ottpremise{ \{ \fm , \g , \m , \cnt \}\,  \ottnt{e_{{\mathrm{2}}}}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottnt{e'_{{\mathrm{2}}}} }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottmv{a}  \ottsym{[}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{]}  \ottsym{:=}  \ottnt{e_{{\mathrm{2}}}}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottmv{a}  \ottsym{[}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{]}  \ottsym{:=}  \ottnt{e'_{{\mathrm{2}}}}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}} }{%
{\ottdrulename{Exr\_arr\_assign\_expr\_r}}{}%
}}


\newcommand{\ottdruleExrXXarrXXassignXXval}[1]{\ottdrule[#1]{%
\ottpremise{\g'  \ottsym{=}  \g  \ottsym{(}  \ottmv{a}  \ottsym{)}  \ottsym{[}  \ottnt{v_{{\mathrm{1}}}}  \mapsto  \ottnt{v_{{\mathrm{2}}}}  \ottsym{]}}%
\ottpremise{ \cnt'  =  \cnt  + 1 }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottmv{a}  \ottsym{[}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{]}  \ottsym{:=}  \ottnt{v_{{\mathrm{2}}}}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}}   \longrightarrow  \{ \fm , \g' , \m , \cnt' \}\,  \ottkw{skip}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}} }{%
{\ottdrulename{Exr\_arr\_assign\_val}}{}%
}}


\newcommand{\ottdruleExrXXfor}[1]{\ottdrule[#1]{%
\ottpremise{\ottmv{x} \, \notin \, \m}%
\ottpremise{\ottnt{v_{{\mathrm{1}}}}  \ottsym{<}  \ottnt{v_{{\mathrm{2}}}}}%
\ottpremise{ \ottnt{v'_{{\mathrm{1}}}}  =  \ottnt{v_{{\mathrm{1}}}}  + 1 }%
\ottpremise{ \cnt'  =  \cnt  + 1 }%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottkw{for} \, \ottmv{x} \, \ottkw{from} \, \ottnt{v_{{\mathrm{1}}}} \, \ottkw{to} \, \ottnt{v_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{s}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}}   \longrightarrow  \{ \fm , \g , \m , \cnt' \}\,  \ottsym{\{}  \ottmv{x}  \ottsym{/}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{\}}  \ottnt{s}  \ottsym{;}  \ottkw{for} \, \ottmv{x} \, \ottkw{from} \, \ottnt{v'_{{\mathrm{1}}}} \, \ottkw{to} \, \ottnt{v_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{s}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}} }{%
{\ottdrulename{Exr\_for}}{}%
}}


\newcommand{\ottdruleExrXXforXXbase}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{v_{{\mathrm{1}}}}  \ottsym{=}  \ottnt{v_{{\mathrm{2}}}}}%
}{
 \{ \fm , \g , \m , \cnt \}\,  \ottkw{for} \, \ottmv{x} \, \ottkw{from} \, \ottnt{v_{{\mathrm{2}}}} \, \ottkw{to} \, \ottnt{v_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{s}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}}   \longrightarrow  \{ \fm , \g , \m' , \cnt \}\,  \ottkw{skip}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottnt{e_{{\mathrm{0}}}} }{%
{\ottdrulename{Exr\_for\_base}}{}%
}}

\newcommand{\ottdefnexprXXreduce}[1]{\begin{ottdefnblock}[#1]{$ \{ \fm , \g , \m , \cnt \}\,  \ottnt{e}   \longrightarrow  \{ \fm' , \g' , \m' , \cnt' \}\,  \ottnt{e'} $}{\ottcom{$\ottnt{e}$ reduces to $\ottnt{e'}$}}
\ottusedrule{\ottdruleExrXXvar{}}
\ottusedrule{\ottdruleExrXXarrXXgetXXexpr{}}
\ottusedrule{\ottdruleExrXXarrXXgetXXval{}}
\ottusedrule{\ottdruleExrXXunopXXexpr{}}
\ottusedrule{\ottdruleExrXXunopXXval{}}
\ottusedrule{\ottdruleExrXXbinopXXl{}}
\ottusedrule{\ottdruleExrXXbinopXXr{}}
\ottusedrule{\ottdruleExrXXbinopXXval{}}
\ottusedrule{\ottdruleExrXXfnXXexpr{}}
\ottusedrule{\ottdruleExrXXfnXXcall{}}
\ottusedrule{\ottdruleExrXXskipXXexpr{}}
\ottusedrule{\ottdruleExrXXskipXXval{}}
\ottusedrule{\ottdruleExrXXseq{}}
\ottusedrule{\ottdruleExrXXseqXXskip{}}
\ottusedrule{\ottdruleExrXXdefXXexpr{}}
\ottusedrule{\ottdruleExrXXdefXXval{}}
\ottusedrule{\ottdruleExrXXdefXXarr{}}
\ottusedrule{\ottdruleExrXXassignXXexpr{}}
\ottusedrule{\ottdruleExrXXassignXXval{}}
\ottusedrule{\ottdruleExrXXarrXXassignXXexprXXl{}}
\ottusedrule{\ottdruleExrXXarrXXassignXXexprXXr{}}
\ottusedrule{\ottdruleExrXXarrXXassignXXval{}}
\ottusedrule{\ottdruleExrXXfor{}}
\ottusedrule{\ottdruleExrXXforXXbase{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJop}{
\ottdefnexprXXreduce{}}

% defns Jtrans
%% defn expr_transform
\newcommand{\ottdruleExtXXval}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{v}  \equiv  \llbracket  \hv  \rrbracket_t}%
}{
\hv  \longrightarrow_t  \ottnt{v}}{%
{\ottdrulename{Ext\_val}}{}%
}}


\newcommand{\ottdruleExtXXarrXXget}[1]{\ottdrule[#1]{%
\ottpremise{\he  \longrightarrow_t  \ottnt{e}}%
}{
\ottmv{a}  \ottsym{[}  \he  \ottsym{]}  \longrightarrow_t  \ottmv{a}  \ottsym{[}  \ottnt{e}  \ottsym{]}}{%
{\ottdrulename{Ext\_arr\_get}}{}%
}}


\newcommand{\ottdruleExtXXfnXXcall}[1]{\ottdrule[#1]{%
\ottpremise{\ottkw{fdef} \, \hf \, \ottnt{hfval}  \longrightarrow_t  \ottkw{fdef} \, \ottmv{f} \, \ottnt{fval}}%
\ottpremise{\he_{{\mathrm{1}}}  \longrightarrow_t  \ottnt{e_{{\mathrm{1}}}} \quad .. \quad \he_{\ottmv{k}}  \longrightarrow_t  \ottnt{e_{\ottmv{k}}}}%
}{
\hf  \ottsym{(}  \he_{{\mathrm{1}}}  \ottsym{,} \, .. \, \ottsym{,}  \he_{\ottmv{k}}  \ottsym{)}  \longrightarrow_t  \ottmv{f}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{k}}}  \ottsym{)}}{%
{\ottdrulename{Ext\_fn\_call}}{}%
}}

\newcommand{\ottdefnexprXXtransform}[1]{\begin{ottdefnblock}[#1]{$\he  \longrightarrow_t  \ottnt{e}$}{\ottcom{$\he$ is transformed to $\ottnt{e}$}}
\ottusedrule{\ottdruleExtXXval{}}
\ottusedrule{\ottdruleExtXXarrXXget{}}
\ottusedrule{\ottdruleExtXXfnXXcall{}}
\end{ottdefnblock}}

%% defn stmt_transform
\newcommand{\ottdruleSttXXskip}[1]{\ottdrule[#1]{%
}{
 \ottkw{hskip}  \xrightarrow{ \ottnt{ctx} }_t  \ottkw{skip} }{%
{\ottdrulename{Stt\_skip}}{}%
}}


\newcommand{\ottdruleSttXXseq}[1]{\ottdrule[#1]{%
\ottpremise{ \hs_{{\mathrm{1}}}  \xrightarrow{ \ottnt{ctx} }_t  \ottnt{s_{{\mathrm{1}}}} }%
\ottpremise{ \hs_{{\mathrm{2}}}  \xrightarrow{ \ottnt{ctx} }_t  \ottnt{s_{{\mathrm{2}}}} }%
}{
 \hs_{{\mathrm{1}}}  \ottsym{;}  \hs_{{\mathrm{2}}}  \xrightarrow{ \ottnt{ctx} }_t  \ottnt{s_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{s_{{\mathrm{2}}}} }{%
{\ottdrulename{Stt\_seq}}{}%
}}


\newcommand{\ottdruleSttXXvarXXdec}[1]{\ottdrule[#1]{%
\ottpremise{\he  \longrightarrow_t  \ottnt{e}}%
}{
 \ottkw{hdef} \, \ottmv{x}  \ottsym{:=}  \he  \xrightarrow{ \ottnt{ctx} }_t  \ottkw{def} \, \ottmv{x}  \ottsym{:=}  \ottnt{e} }{%
{\ottdrulename{Stt\_var\_dec}}{}%
}}


\newcommand{\ottdruleSttXXarrXXdec}[1]{\ottdrule[#1]{%
}{
 \ottkw{hdef} \, \ottmv{x}  \ottsym{:=}  \ottmv{a}  \xrightarrow{ \ottnt{ctx} }_t  \ottkw{def} \, \ottmv{x}  \ottsym{:=}  \ottmv{a} }{%
{\ottdrulename{Stt\_arr\_dec}}{}%
}}


\newcommand{\ottdruleSttXXvarXXassign}[1]{\ottdrule[#1]{%
\ottpremise{\he  \longrightarrow_t  \ottnt{e}}%
\ottpremise{\ottnt{e'}  \ottsym{=}  \ottnt{ctx} \,  \scalebox{1.25}[1]{\texttt{\&}\hskip0pt}  \, \ottmv{rnset}}%
\ottpremise{\ottnt{e''}  \ottsym{=}  \ottnt{e} \,  \scalebox{1.25}[1]{\texttt{\&}\hskip0pt}  \, \ottnt{e'}}%
\ottpremise{\ottnt{e'''}  \ottsym{=}  \ottmv{x} \,  \scalebox{1.25}[1]{\texttt{\&}\hskip0pt}  \, \ottsym{(}   {\raise-.6ex\hbox{\scalebox{1.1}[1]{\texttt{\~}\hskip0pt}\hskip0pt}\hskip0pt}\!\!  \, \ottnt{e'}  \ottsym{)}}%
}{
 \ottmv{x}  \ottsym{:=}  \he  \xrightarrow{ \ottnt{ctx} }_t  \ottmv{x}  \ottsym{:=}  \ottsym{(}  \ottnt{e''} \,  \texttt{|}  \, \ottnt{e'''}  \ottsym{)} }{%
{\ottdrulename{Stt\_var\_assign}}{}%
}}


\newcommand{\ottdruleSttXXarrXXassign}[1]{\ottdrule[#1]{%
\ottpremise{\he_{{\mathrm{1}}}  \longrightarrow_t  \ottnt{e_{{\mathrm{1}}}}}%
\ottpremise{\he_{{\mathrm{2}}}  \longrightarrow_t  \ottnt{e_{{\mathrm{2}}}}}%
\ottpremise{\ottnt{e'}  \ottsym{=}  \ottnt{ctx} \,  \scalebox{1.25}[1]{\texttt{\&}\hskip0pt}  \, \ottmv{rnset}}%
\ottpremise{\ottnt{e''}  \ottsym{=}  \ottnt{e_{{\mathrm{2}}}} \,  \scalebox{1.25}[1]{\texttt{\&}\hskip0pt}  \, \ottnt{e'}}%
\ottpremise{\ottnt{e'''}  \ottsym{=}  \ottmv{a}  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{]} \,  \scalebox{1.25}[1]{\texttt{\&}\hskip0pt}  \, \ottsym{(}   {\raise-.6ex\hbox{\scalebox{1.1}[1]{\texttt{\~}\hskip0pt}\hskip0pt}\hskip0pt}\!\!  \, \ottnt{e'}  \ottsym{)}}%
}{
 \ottmv{a}  \ottsym{[}  \he_{{\mathrm{1}}}  \ottsym{]}  \ottsym{:=}  \he_{{\mathrm{2}}}  \xrightarrow{ \ottnt{ctx} }_t  \ottmv{a}  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{]}  \ottsym{:=}  \ottsym{(}  \ottnt{e''} \,  \texttt{|}  \, \ottnt{e'''}  \ottsym{)} }{%
{\ottdrulename{Stt\_arr\_assign}}{}%
}}


\newcommand{\ottdruleSttXXfor}[1]{\ottdrule[#1]{%
\ottpremise{\hv_{{\mathrm{1}}}  \longrightarrow_t  \ottnt{v_{{\mathrm{1}}}}}%
\ottpremise{\hv_{{\mathrm{2}}}  \longrightarrow_t  \ottnt{v_{{\mathrm{2}}}}}%
\ottpremise{ \hs  \xrightarrow{ \ottnt{ctx} }_t  \ottnt{s} }%
}{
 \ottkw{hfor} \, \ottmv{x} \, \ottkw{from} \, \hv_{{\mathrm{1}}} \, \ottkw{to} \, \hv_{{\mathrm{2}}}  \ottsym{:}  \hs  \xrightarrow{ \ottnt{ctx} }_t  \ottkw{for} \, \ottmv{x} \, \ottkw{from} \, \ottnt{v_{{\mathrm{1}}}} \, \ottkw{to} \, \ottnt{v_{{\mathrm{2}}}}  \ottsym{:}  \ottnt{s} }{%
{\ottdrulename{Stt\_for}}{}%
}}


\newcommand{\ottdruleSttXXif}[1]{\ottdrule[#1]{%
\ottpremise{\he  \longrightarrow_t  \ottnt{e}}%
\ottpremise{\ottnt{ctx_{{\mathrm{1}}}}  \ottsym{=}  \ottnt{e} \,  \scalebox{1.25}[1]{\texttt{\&}\hskip0pt}  \, \ottnt{ctx}}%
\ottpremise{\ottnt{ctx_{{\mathrm{2}}}}  \ottsym{=}  \ottsym{(}   {\raise-.6ex\hbox{\scalebox{1.1}[1]{\texttt{\~}\hskip0pt}\hskip0pt}\hskip0pt}\!\!  \, \ottnt{e}  \ottsym{)} \,  \scalebox{1.25}[1]{\texttt{\&}\hskip0pt}  \, \ottnt{ctx}}%
\ottpremise{ \hs_{{\mathrm{1}}}  \xrightarrow{ \ottnt{ctx_{{\mathrm{1}}}} }_t  \ottnt{s_{{\mathrm{1}}}} }%
\ottpremise{ \hs_{{\mathrm{2}}}  \xrightarrow{ \ottnt{ctx_{{\mathrm{2}}}} }_t  \ottnt{s_{{\mathrm{2}}}} }%
}{
 \ottkw{hif} \, \he \, \ottkw{then} \, \hs_{{\mathrm{1}}} \, \ottkw{else} \, \hs_{{\mathrm{2}}}  \xrightarrow{ \ottnt{ctx} }_t  \ottnt{s_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{s_{{\mathrm{2}}}} }{%
{\ottdrulename{Stt\_if}}{}%
}}


\newcommand{\ottdruleSttXXret}[1]{\ottdrule[#1]{%
\ottpremise{\he  \longrightarrow_t  \ottnt{e}}%
\ottpremise{\ottnt{e'}  \ottsym{=}  \ottnt{ctx} \,  \scalebox{1.25}[1]{\texttt{\&}\hskip0pt}  \, \ottmv{rnset}}%
\ottpremise{\ottnt{e''}  \ottsym{=}  \ottnt{e} \,  \scalebox{1.25}[1]{\texttt{\&}\hskip0pt}  \, \ottnt{e'}}%
}{
 \ottkw{hreturn} \, \he  \xrightarrow{ \ottnt{ctx} }_t  \ottmv{rval}  \ottsym{:=}  \ottsym{(}  \ottnt{e''} \,  \texttt{|}  \, \ottmv{rval}  \ottsym{)}  \ottsym{;}  \ottmv{rnset}  \ottsym{:=}  \ottsym{(}  \ottmv{rnset} \,  \scalebox{1.25}[1]{\texttt{\&}\hskip0pt}  \, \ottsym{(}   {\raise-.6ex\hbox{\scalebox{1.1}[1]{\texttt{\~}\hskip0pt}\hskip0pt}\hskip0pt}\!\!  \, \ottnt{ctx}  \ottsym{)}  \ottsym{)} }{%
{\ottdrulename{Stt\_ret}}{}%
}}

\newcommand{\ottdefnstmtXXtransform}[1]{\begin{ottdefnblock}[#1]{$ \hs  \xrightarrow{ \ottnt{ctx} }_t  \ottnt{s} $}{\ottcom{$\hs$ is transformed to $\ottnt{s}$}}
\ottusedrule{\ottdruleSttXXskip{}}
\ottusedrule{\ottdruleSttXXseq{}}
\ottusedrule{\ottdruleSttXXvarXXdec{}}
\ottusedrule{\ottdruleSttXXarrXXdec{}}
\ottusedrule{\ottdruleSttXXvarXXassign{}}
\ottusedrule{\ottdruleSttXXarrXXassign{}}
\ottusedrule{\ottdruleSttXXfor{}}
\ottusedrule{\ottdruleSttXXif{}}
\ottusedrule{\ottdruleSttXXret{}}
\end{ottdefnblock}}

%% defn fdef_transform
\newcommand{\ottdruleFdeftXXfdef}[1]{\ottdrule[#1]{%
\ottpremise{ \hs  \xrightarrow{  \textsc{True}  }_t  \ottnt{s} }%
}{
\ottkw{fdef} \, \hf \, \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{k}}}  \ottsym{)}  \ottsym{:}  \hs  \longrightarrow_t  \ottkw{fdef} \, \ottmv{f} \, \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{k}}}  \ottsym{)}  \ottsym{:}  \ottnt{s}  \scalebox{0.5}[0.75]{ \textbf{ @}\!\,}  \ottmv{rval}}{%
{\ottdrulename{Fdeft\_fdef}}{}%
}}

\newcommand{\ottdefnfdefXXtransform}[1]{\begin{ottdefnblock}[#1]{$\ottnt{hfndef}  \longrightarrow_t  \ottnt{fndef}$}{\ottcom{$\ottnt{hfndef}$ is transformed to $\ottnt{fndef}$}}
\ottusedrule{\ottdruleFdeftXXfdef{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJtrans}{
\ottdefnexprXXtransform{}\ottdefnstmtXXtransform{}\ottdefnfdefXXtransform{}}

% defns Joptrans
%% defn unop_transform
\newcommand{\ottdruleUnoptXXlnot}[1]{\ottdrule[#1]{%
}{
  \texttt{!}   \xrightarrow{\ominus}   {\raise-.6ex\hbox{\scalebox{1.1}[1]{\texttt{\~}\hskip0pt}\hskip0pt}\hskip0pt}\!\!  }{%
{\ottdrulename{Unopt\_lnot}}{}%
}}


\newcommand{\ottdruleUnoptXXunop}[1]{\ottdrule[#1]{%
}{
 \ominus_h\!  \xrightarrow{\ominus}  \ominus\! }{%
{\ottdrulename{Unopt\_unop}}{}%
}}

\newcommand{\ottdefnunopXXtransform}[1]{\begin{ottdefnblock}[#1]{$ \ominus_h\!  \xrightarrow{\ominus}  \ominus\! $}{\ottcom{$\ominus_h\!$ is transformed to $\ominus\!$}}
\ottusedrule{\ottdruleUnoptXXlnot{}}
\ottusedrule{\ottdruleUnoptXXunop{}}
\end{ottdefnblock}}

%% defn binop_transform
\newcommand{\ottdruleBinoptXXland}[1]{\ottdrule[#1]{%
}{
  \scalebox{1.25}[1]{\texttt{\&\&} }   \xrightarrow{\oplus}   \scalebox{1.25}[1]{\texttt{\&}\hskip0pt}  }{%
{\ottdrulename{Binopt\_land}}{}%
}}


\newcommand{\ottdruleBinoptXXlor}[1]{\ottdrule[#1]{%
}{
  \texttt{||}   \xrightarrow{\oplus}   \texttt{|}  }{%
{\ottdrulename{Binopt\_lor}}{}%
}}


\newcommand{\ottdruleBinoptXXeq}[1]{\ottdrule[#1]{%
}{
  \texttt{==}   \xrightarrow{\oplus}   \texttt{==}\sext  }{%
{\ottdrulename{Binopt\_eq}}{}%
}}


\newcommand{\ottdruleBinoptXXneq}[1]{\ottdrule[#1]{%
}{
  \texttt{!=}   \xrightarrow{\oplus}   \texttt{!=}\sext  }{%
{\ottdrulename{Binopt\_neq}}{}%
}}


\newcommand{\ottdruleBinoptXXgt}[1]{\ottdrule[#1]{%
}{
  \texttt{>}   \xrightarrow{\oplus}   \texttt{>}\sext  }{%
{\ottdrulename{Binopt\_gt}}{}%
}}


\newcommand{\ottdruleBinoptXXlt}[1]{\ottdrule[#1]{%
}{
  \texttt{<}   \xrightarrow{\oplus}   \texttt{<}\sext  }{%
{\ottdrulename{Binopt\_lt}}{}%
}}


\newcommand{\ottdruleBinoptXXgte}[1]{\ottdrule[#1]{%
}{
  \texttt{>=}   \xrightarrow{\oplus}   \texttt{>=}\sext  }{%
{\ottdrulename{Binopt\_gte}}{}%
}}


\newcommand{\ottdruleBinoptXXlte}[1]{\ottdrule[#1]{%
}{
  \texttt{<=}   \xrightarrow{\oplus}   \texttt{<=}\sext  }{%
{\ottdrulename{Binopt\_lte}}{}%
}}


\newcommand{\ottdruleBinoptXXbinop}[1]{\ottdrule[#1]{%
}{
 \oplus_h  \xrightarrow{\oplus}  \oplus }{%
{\ottdrulename{Binopt\_binop}}{}%
}}

\newcommand{\ottdefnbinopXXtransform}[1]{\begin{ottdefnblock}[#1]{$ \oplus_h  \xrightarrow{\oplus}  \oplus $}{\ottcom{$\oplus_h$ is transformed to $\oplus$}}
\ottusedrule{\ottdruleBinoptXXland{}}
\ottusedrule{\ottdruleBinoptXXlor{}}
\ottusedrule{\ottdruleBinoptXXeq{}}
\ottusedrule{\ottdruleBinoptXXneq{}}
\ottusedrule{\ottdruleBinoptXXgt{}}
\ottusedrule{\ottdruleBinoptXXlt{}}
\ottusedrule{\ottdruleBinoptXXgte{}}
\ottusedrule{\ottdruleBinoptXXlte{}}
\ottusedrule{\ottdruleBinoptXXbinop{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJoptrans}{
\ottdefnunopXXtransform{}\ottdefnbinopXXtransform{}}

\newcommand{\ottdefnss}{
\ottdefnsJop
\ottdefnsJtrans
\ottdefnsJoptrans
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
\ottdefnss}

\begin{document}
\ottall

\begin{verbatim}
Definition rules:        48 good    0 bad
Definition rule clauses: 113 good    0 bad
\end{verbatim}
\end{document}
